{{define "content"}}
<div class="max-w-4xl mx-auto space-y-6">
    <!-- Profile Info -->
    <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6">
        <div class="mb-6 flex justify-between items-center">
            <div>
                <h2 class="text-2xl font-bold text-gray-800">Meu Perfil</h2>
                <p class="text-gray-600">Gerencie suas informações pessoais e de conta.</p>
            </div>
            <div class="h-16 w-16 rounded-full bg-blue-500 flex items-center justify-center text-white text-2xl font-bold">
                {{if .User.FirstName}}{{slice .User.FirstName 0 1 | toUpper}}{{else}}{{slice .User.RoleName 0 1 | toUpper}}{{end}}
            </div>
        </div>

        <div id="profile-alerts">
            {{template "alerts" .}}
        </div>

        <form hx-put="/accounts/profile" hx-target="#profile-alerts" class="space-y-4">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                {{template "form-input" dict "ID" "name" "Name" "name" "Label" "Nome" "Value" .Data.Profile.Person.Name "Required" true}}
                {{template "form-input" dict "ID" "email" "Name" "email" "Label" "Email" "Type" "email" "Value" .Data.Profile.Email "Required" true "ReadOnly" true "HelpText" "O e-mail não pode ser alterado."}}
            </div>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                {{template "form-input" dict "ID" "cpf" "Name" "cpf" "Label" "CPF" "Value" .Data.Profile.Person.CPF "Required" true}}
                {{template "form-input" dict "ID" "phone" "Name" "phone" "Label" "Telefone" "Value" .Data.Profile.Person.Phone}}
                {{template "form-input" dict "ID" "birth_date" "Name" "birth_date" "Label" "Data de Nascimento" "Type" "date" "Value" .Data.Profile.Person.BirthDate}}
            </div>

            <div class="pt-4 flex justify-end">
                {{template "form-button" dict "Label" "Salvar Alterações"}}
            </div>
        </form>
    </div>

    <!-- Password Update -->
    <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6">
        <h3 class="text-xl font-bold text-gray-800 mb-4">Alterar Senha</h3>
        
        <div id="password-alerts"></div>

        <form hx-put="/accounts/update-password" hx-target="#password-alerts" class="space-y-4">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                {{template "form-input" dict "ID" "current_password" "Name" "current_password" "Label" "Senha Atual" "Type" "password" "Required" true}}
                {{template "form-input" dict "ID" "new_password" "Name" "new_password" "Label" "Nova Senha" "Type" "password" "Required" true}}
                {{template "form-input" dict "ID" "confirm_password" "Name" "confirm_password" "Label" "Confirmar Nova Senha" "Type" "password" "Required" true}}
            </div>

            <div class="pt-4 flex justify-end">
                {{template "form-button" dict "Label" "Atualizar Senha" "Class" "bg-gray-800 hover:bg-gray-900"}}
            </div>
        </form>
    </div>
</div>
{{end}}

{{template "base" .}}
